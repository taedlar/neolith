Neolith Developer Reference
===========================

# Debug Logs

The log messages generated by the LPMud Driver goes to the file as specified by `DebugLogFile` in the configuration file.
Typically you'll also want to enable the `LogWithDate` setting to automatically prefix each log message with an ISO-8601 format timestamp.

## Neolith Debug Log Format

In terms of troubleshooting, a structured log format brings many advantages to the administrator.
Human-readbility is equally important for a LPMud's wizards, especially when the wizard has no access to the shell on the MUD server.

Neolith's log format is designed to balance both requirements while keeping the size of debug log as small as possible.
The Neolith Debug Log Format (NDLF) is described as below:

1. The debug log file is a stream of log messages separated by the newline ('\n') character.
2. If a log message starts with a hash sign ('#') or tab ('\t') character, the line is only for human-readaile. Log processing tool can skip these lines safely.
3. Otherwise, the log message can be parsed into multiple columns separated by tab character like below:

```
[timestamp \t] [log-meta \t] message-text \n
```

### Timestamp

If `LogWithDate` is enabled in the configuration file, the LPMud Driver automatically preix each log message with a timestamp in ISO-8601 format that contains:
```
YYYY-MM-DD hh:mm:ss
```

### Log-meta

The log-meta part is a JSON string that contains program-readable information to assist Log Processing tools.
Neolith provides the following meta data in JSON:
| Log-meta | Description |
| --- | --- |
| A JSON array of 4 elements. | An error or trace messages, and the elements are type, source-file, line, function. |
| A JSON object | An informative log message. The contents of JSON object may have its own signature property for Log Processing tool to identify. |

### Mudlib Compatibility

As the log-meta can be easily identified by starting with '`[`' or '`{`' character, a mudlibe using Neolith can continue to write its own log format
while keeping the compatibility that a Log Processing tool can pick log-meta from those log messages generated by the LPMud Driver.

We encourage mudlib designers to produce NDLF-compatible log messages to receive the advantage of structured log format.
